var app=angular.module("yemaWebApp",[]),navIndex=0;app.controller("doTaskCtrl",function($scope,$http){$("#myCarousel").carousel({interval:2e3}),$scope.planeColor=!0,$scope.changePlaneColor=function(){$scope.planeColor=!$scope.planeColor},$scope.noApp=!1,$scope.pageIndex=0,$scope.hasMore=0,$scope.pageNum=0,$scope.totalPageNum=0,$scope.currentPage=0;var url="doTask/taskHall/"+$scope.pageIndex+"/allTask";$http.get(url).success(function(response){$scope.taskDisplayed=response.allTask,$scope.hasMore=response.hasMore,$scope.prevPage=function(){$scope.pageIndex=$scope.pageIndex-20;var url="doTask/taskHall/"+$scope.pageIndex+"/allTask";$http.get(url).success(function(response){$scope.taskDisplayed=response.allTask,$scope.hasMore=response.hasMore})},$scope.nextPage=function(){$scope.pageIndex=$scope.pageIndex+20;var url="doTask/taskHall/"+$scope.pageIndex+"/allTask";$http.get(url).success(function(response){$scope.taskDisplayed=response.allTask,$scope.hasMore=response.hasMore})}}),$scope.displayAll=function(){var url="doTask/taskHall/"+$scope.pageIndex+"/allTask";$http.get(url).success(function(response){$scope.taskDisplayed=response.allTask,$scope.hasMore=response.hasMore,$scope.prevPage=function(){$scope.pageIndex=$scope.pageIndex-20;var url="doTask/taskHall/"+$scope.pageIndex+"/allTask";$http.get(url).success(function(response){$scope.taskDisplayed=response.allTask,$scope.hasMore=response.hasMore})},$scope.nextPage=function(){$scope.pageIndex=$scope.pageIndex+20;var url="doTask/taskHall/"+$scope.pageIndex+"/allTask";$http.get(url).success(function(response){$scope.taskDisplayed=response.allTask,$scope.hasMore=response.hasMore})}})},$scope.commentTasksOnly=function(){var url="doTask/taskHall/"+$scope.pageIndex+"/commentTask";$http.get(url).success(function(response){$scope.commentTask=response.allTask,$scope.hasMore=response.hasMore,$scope.prevPage=function(){$scope.commentIndex=$scope.pageIndex-20;var url="doTask/taskHall/"+$scope.commentIndex+"/commentTask";$http.get(url).success(function(response){$scope.commentTask=response.allTask,$scope.hasMore=response.hasMore})},$scope.nextPage=function(){$scope.commentIndex=$scope.pageIndex+20;var url="doTask/taskHall/"+$scope.commentIndex+"/commentTask";$http.get(url).success(function(response){$scope.commentTask=response.allTask,$scope.hasMore=response.hasMore})}})},$scope.downloadTasksOnly=function(){var url="doTask/taskHall/"+$scope.pageIndex+"/downTask";$http.get(url).success(function(response){$scope.downTask=response.allTask,$scope.hasMore=response.hasMore,$scope.prevPage=function(){$scope.downTaskIndex=$scope.pageIndex-20;var url="doTask/taskHall/"+$scope.downTaskIndex+"/downTask";$http.get(url).success(function(response){$scope.downTask=response.allTask,$scope.hasMore=response.hasMore})},$scope.nextPage=function(){$scope.downTaskIndex=$scope.pageIndex+20;var url="doTask/taskHall/"+$scope.downTaskIndex+"/downTask";$http.get(url).success(function(response){$scope.downTask=response.allTask,$scope.hasMore=response.hasMore})}})},$scope.inactiveTasksOnly=function(){var url="doTask/taskHall/"+$scope.pageIndex+"/inactiveTask";$http.get(url).success(function(response){$scope.inactiveTask=response.allTask,$scope.hasMore=response.hasMore,$scope.prevPage=function(){$scope.inactiveTaskIndex=$scope.pageIndex-20;var url="doTask/taskHall/"+$scope.inactiveTaskIndex+"/inactiveTask";$http.get(url).success(function(response){$scope.inactiveTask=response.allTask,$scope.hasMore=response.hasMore})},$scope.nextPage=function(){$scope.inactiveTaskIndex=$scope.pageIndex+20;var url="doTask/taskHall/"+$scope.inactiveTaskIndex+"/inactiveTask";$http.get(url).success(function(response){$scope.inactiveTask=response.allTask,$scope.hasMore=response.hasMore})}})},$scope.getTaskFormData={},$scope.getTaskFormData.receiveCount=void 0,$scope.getTaskFormData.detailRem=void 0,$scope.getTaskFormData.errorMsg=void 0,$scope.getTaskFormData.result=!1,$scope.getTask=function(currentApp){var username=getCookie("username");if(""==username)$scope.getTaskFormData.errorMsg="请先登陆帐号后再领取任务";else if(0==$scope.getTaskFormData.receiveCount)$scope.getTaskFormData.errorMsg="请正确填写领取条目";else if(parseInt($scope.getTaskFormData.receiveCount)!=$scope.getTaskFormData.receiveCount)$scope.getTaskFormData.errorMsg="请正确填写领取条目";else if($scope.getTaskFormData.receiveCount>parseInt(currentApp.remainCount))$scope.getTaskFormData.errorMsg="此任务剩余条数不足";else{var url="doTask/postUsertask/"+currentApp.objectId+"/"+currentApp.rateUnitPrice+"/"+currentApp.appObjectId,postData={receiveCount:$scope.getTaskFormData.receiveCount,detailRem:$scope.getTaskFormData.detailRem,latestReleaseDate:currentApp.latestReleaseDate};$http.post(url,postData).success(function(response){console.log(response),$scope.getTaskFormData.errorMsg=response.errorMsg,$scope.getTaskFormData.result=response.succeeded})}},$scope.refresh=function(){location.reload()}});