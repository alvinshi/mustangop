var app=angular.module("yemaWebApp",[]),navIndex=3;app.controller("taskCheckCtrl",function($scope,$http,$location){$scope.currentTaskId=void 0,$scope.noApp=!1,$scope.myObj=Object();var taskUrl="/taskCheck/taskAudit";$http.get(taskUrl).success(function(response){$scope.taskAudit=response.taskAudit,$scope.taskAudit.length>0?($scope.taskIndex=0,$scope.taskDisplayed=$scope.taskAudit[0]):$scope.noApp=!0}),$scope.turnOffTask=function(){var turnUrl="/taskCheck/turnOff";$http.post(turnUrl).success(function(response){function refresh(){location.href="/taskCheck/"}$scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,0!=response.errorId?($scope.errorMsg=response.errorMsg,$("#errorMsg").modal("show")):setTimeout(refresh,2e3)})},$scope.check=function(app,index){$scope.taskIndex=index,$scope.taskDisplayed=app,console.log(app)},$scope.oneTaskOff=function(taskId){var oneTaskUrl="/taskCheck/turnOffOneTask";$http.post(oneTaskUrl,{taskId:taskId}).success(function(response){function refresh(){location.href="/taskCheck/"}$scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,0!=response.errorId?($scope.errorMsg=response.errorMsg,$("#errorMsg").modal("show")):setTimeout(refresh,2e3)})};var specTaskCheck=function(taskId){$scope.currentTaskId=taskId;var url="/taskCheck/specTaskCheck/"+taskId;$http.get(url).success(function(response){$scope.specTask=response.rtnResults,$scope.totalAccepted=response.totalAccepted,$scope.totalGetTask=response.totalGetTask,$scope.totalRejected=response.totalRejected,$scope.totalSubmited=response.totalSubmited,$scope.totalTimeout=response.totalTimeout,$scope.totalUndo=response.totalUndo})};$scope.confirmCancel=function(taskId){var url="/taskCheck/cancelTask/"+taskId;console.log(taskId),$http.get(url).success(function(response){location.reload()})},$scope.checkText=function(){$scope.myObj.rejectReason.length>20&&($scope.myObj.rejectReason=$scope.myObj.rejectReason.substr(0,20))},$scope.accept=function(entry){var entryId=entry.id;entry.status="accepted";var url="/taskCheck/accept/"+entryId;$http.post(url).success(function(response){specTaskCheck($scope.currentTaskId)})},$scope.reject=function(entryId){var flag=!0;if($scope.required=!1,""!=$scope.myObj.rejectReason&&void 0!=$scope.myObj.rejectReason||(flag=!1,$scope.required=!0),flag){var url="/taskCheck/reject/"+entryId,reject_reason={rejectReason:$scope.myObj.rejectReason};$http.post(url,reject_reason).success(function(response){$("#rejectreason"+entryId).modal("hide"),$scope.myObj.rejectReason="",specTaskCheck($scope.currentTaskId)})}},$scope.addApp=function(id){$("#"+id).popover("toggle")}});