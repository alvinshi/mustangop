var app=angular.module("yemaWebApp",[]),navIndex=0;app.controller("homePageCtrl",function($scope,$http){$scope.inviteUrl="http://www.mustangop.com/user/register/"+getCookie("userIdCookie"),$scope.copyUrl=function(){$("#alert-btn").popover("toggle");var Url=document.getElementById("invitecopy");Url.select(),document.execCommand("Copy")},$scope.noviceTaskObject=Object(),$scope.noviceTaskObject.luxuryUserStep=0,$scope.noviceTaskObject.hasFirstRecharge=0;var noviceTaskUrl="homePage/noviceTask";$http.get(noviceTaskUrl).success(function(response){$scope.noviceTaskObject=response.noviceTaskObject}),$scope.LuxuryUser=function(){var luxuryURL="homePage/LuxuryUser";$http.post(luxuryURL,{}).success(function(response){$scope.luxuryMessage=response.errorMsg,$scope.luxurySucceed=response.errorId})},$("#myCarousel").carousel({interval:5e3}),$("#myCarousel1").carousel({interval:3e3});var bannerurl="homePage/banner";$http.get(bannerurl).success(function(response){$scope.bannerUrl=response.bannerUrl});var ischeckinsUrl="homePage/ischeckins";$scope.isCheckIns=0,$scope.todayYB=1,$scope.continueCheck=2,$scope.latestDays=0,$http.get(ischeckinsUrl).success(function(response){0==response.errorId&&($scope.isCheckIns=response.isCheckIns,$scope.todayYB=response.todayYB,$scope.continueCheck=response.continueCheck,$scope.latestDays=response.latestDays)}),$http.get("homePage/dayTask").success(function(response){0==response.errorId&&($scope.releaseTaskY=response.releaseTaskY,$scope.doTaskY=response.doTaskY,$scope.checkTaskY=response.checkTaskY)}),$scope.dayTaskLock=0,$scope.dayTaskBtn=function(actionId){if(!($scope.dayTaskLock=1)){$scope.dayTaskLock=1;var checkInsURL="homePage/dayTask";$http.post(checkInsURL,{actionId:actionId}).success(function(response){$scope.dayTaskLock=0,0==response.errorId&&($scope.releaseTaskY=response.releaseTaskY,$scope.doTaskY=response.doTaskY,$scope.checkTaskY=response.checkTaskY)})}},$scope.checkInLock=0,$scope.butCheckIns=function(){if(!($scope.checkInLock=1)){$scope.checkInLock=1;var checkInsURL="homePage/checkIns";$http.post(checkInsURL,{}).success(function(response){$scope.checkInLock=0,$scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,0==response.errorId&&($scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,$scope.isCheckIns=1,$scope.latestDays+=1)})}},$scope.jump=function(curren){window.open("http://aso100.com/app/rank/appid/"+curren.appleId+"/country/cn")},$scope.jump1=function(curren){window.open("http://aso100.com/app/keyword/appid/"+curren.appleId+"/country/cn")},$scope.jump2=function(curren){window.open("http://aso100.com/app/comment/appid/"+curren.appleId+"/country/cn")},$scope.jump3=function(curren){window.open("http://aso100.com/app/download/appid/"+curren.appleId+"/country/cn")};var indexUrl="/index";$http.get(indexUrl).success(function(response){$scope.toDoCount=response.toDoCount,$scope.refusedCount=response.refusedCount});var unCheckCountUrl="/index/unCheckTaskCount";$http.get(unCheckCountUrl).success(function(response){$scope.pendingCount=response.pendingCount});var myReleaseTaskUrl="homePage/myReleaseTask";$http.get(myReleaseTaskUrl).success(function(response){$scope.myReleaseTask=response.myReleaseTaskInfo,$scope.myReleaseTask.length<=0&&($scope.noApp=!0)}),$scope.receInLock=0,clickToReceive=function(button){if(1!=$scope.receInLock){$scope.receInLock=1;var actionId=button.getAttribute("data-id"),userReceiveAwardUrl="homePage/userReceiveAward",transferMoney={actionId:actionId};$http.post(userReceiveAwardUrl,transferMoney).success(function(response){$scope.receInLock=0,$scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,0==response.errorId&&($scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,"finishNoviceTask"==actionId?$scope.noviceTaskObject.noviceTaskAcceptReward=-1:"uploadHaveReceive"==actionId?$scope.noviceTaskObject.noviceReward=-1:"inviteUserReward"==actionId?$scope.noviceTaskObject.canReceive=0:"guideUserRewardYB"==actionId&&($scope.noviceTaskObject.successCanReceive=0))})}}});